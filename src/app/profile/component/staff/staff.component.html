<!--       Wrapped Content   -->
<div class="main-content">
   <div class="container">
      <div class="row">
         <div class="col-12">
            <div class="pageTitle">
               <h2>Preview Profile</h2>
            </div>
         </div>
         <div class="col-12">
            <div class="subTitle">
               <h4>General Information</h4>
            </div>
            <hr>

            <!--  submission Form   -->
            <div class="row">
               <form (ngSubmit)="update()" [formGroup]="form" class="submission-form col-sm-12 col-lg-8" id="form">
                  <div class="form-row">

                     <mat-form-field appearance="outline" class="col-md-6 col-sm-12  form-input outline ">
                        <mat-label>Arabic Name</mat-label>
                        <input formControlName="nameAr" matInput name="arabicName" required>
                        <mat-error *ngIf="form.controls['nameAr']?.errors?.required"> Required</mat-error>
                        <mat-error *ngIf="form.controls['nameAr']?.errors?.pattern">Arabic Letters only</mat-error>
                        <mat-error *ngIf="form.get('nameAr')?.errors?.serverError">{{errorMessage}}</mat-error>
                     </mat-form-field>

                     <mat-form-field appearance="outline" class="col-md-6 col-sm-12  form-input">
                        <mat-label>English Name</mat-label>
                        <input id="nameEn" formControlName="nameEn" matInput required>
                        <mat-error *ngIf="form.controls['nameEn']?.errors?.required"> Required</mat-error>
                        <mat-error *ngIf="form.controls['nameEn']?.errors?.pattern"> English Letters only</mat-error>
                        <mat-error *ngIf="form.get('nameEn')?.errors?.serverError">{{errorMessage}}</mat-error>
                     </mat-form-field>

                     <mat-form-field appearance="outline" class="col-md-6 select-sm col-sm-12 form-input">
                        <mat-label>College</mat-label>
                        <mat-select #collegeSelect [formControlName]="'collegeMenu'" required>
                           <mat-option *ngFor="let col of colleges" [value]="col.id">
                              {{col.nameEn}}
                           </mat-option>
                        </mat-select>
                        <mat-error *ngIf="form.get('collegeMenu')?.errors?.required">Required</mat-error>
                     </mat-form-field>

                     <mat-form-field appearance="outline" class="col-md-6 select-sm col-sm-12 form-input">
                        <mat-label>Department</mat-label>
                        <mat-select #departmentSelect [formControlName]="'departmentMenu'" required>
                           <mat-option *ngFor="let dept of departments" [value]="dept.id">
                              {{dept.nameEn}}
                           </mat-option>
                        </mat-select>
                        <mat-error *ngIf="form.get('departmentMenu')?.errors?.required">Required</mat-error>
                     </mat-form-field>

                     <!-- degree -->
                     <mat-form-field appearance="outline" class="col-md-6 select-sm col-sm-12 form-input">
                        <mat-label>Degree</mat-label>
                        <mat-select [formControlName]="'degreeMenu'" required>
                           <mat-option *ngFor="let degree of degrees" [value]="degree.id">
                              {{degree.nameEn}}
                           </mat-option>
                        </mat-select>
                        <mat-error *ngIf="form.get('degreeMenu')?.errors?.required">Required</mat-error>
                     </mat-form-field>

                     <mat-form-field appearance="outline" class="col-md-6 mr-auto col-sm-12 form-input">
                        <mat-label>University Mail</mat-label>
                        <input type="email" formControlName="universityMail" matInput name="universityMail"
                               required>
                        <mat-error *ngIf="form.controls['universityMail']?.errors?.required"> Required</mat-error>
                        <mat-error *ngIf="form.get('universityMail')?.errors?.email">Invalid Email</mat-error>
                        <mat-error *ngIf="form.get('universityMail')?.errors?.serverError">{{errorMessage}}</mat-error>
                     </mat-form-field>

                     <mat-form-field appearance="outline" class="col-md-6 col-sm-12 form-input">
                        <mat-label> Nationality</mat-label>
                        <input formControlName="nationality" matInput name="nationality" required>
                        <mat-error *ngIf="form.controls['nationality']?.errors?.required"> Required</mat-error>
                        <mat-error *ngIf="form.get('nationality')?.errors?.serverError">{{errorMessage}}</mat-error>
                     </mat-form-field>

                     <mat-form-field appearance="outline" class="col-md-6 col-sm-12 form-input">
                        <mat-label>National Id</mat-label>
                        <input formControlName="nationalId" matInput name="nationalId" required>
                        <mat-error *ngIf="form.controls['nationalId']?.errors?.required"> Required</mat-error>
                        <mat-error *ngIf="form.controls['nationalId']?.errors?.pattern">Must be 14 digits</mat-error>
                        <mat-error *ngIf="form.get('nationalId')?.errors?.serverError">{{errorMessage}}</mat-error>
                     </mat-form-field>

                     <mat-form-field appearance="outline" class="col-md-6 mr-auto col-sm-12 form-input">
                        <mat-label> Birth Date</mat-label>
                        <input type="date" formControlName="birthDate" matInput name="birthDate" required>
                     </mat-form-field>

                     <!--   Additional Information  -->
                     <div class="col-12">
                        <div class="subTitle">
                           <h4>Additional Information</h4>
                           <hr>
                        </div>
                     </div>

                     <mat-form-field appearance="outline" class="col-md-6 col-sm-12 form-input">
                        <mat-label> Mobile Number</mat-label>
                        <input formControlName="phone" matInput required>
                        <mat-error *ngIf="form.controls['phone']?.errors?.required"> Required</mat-error>
                        <mat-error *ngIf="form.get('phone')?.errors?.pattern">Invalid Mobile Number</mat-error>
                        <mat-error *ngIf="form.get('phone')?.errors?.serverError">{{errorMessage}}</mat-error>
                     </mat-form-field>

                     <mat-form-field appearance="outline" class="col-md-6 col-sm-12 form-input">
                        <mat-label>Alternative Mail</mat-label>
                        <input type="email" formControlName="alternativeMail" matInput
                               name="alternativeMail">
                        <mat-error *ngIf="form.get('alternativeMail')?.errors?.email">Invalid Email</mat-error>
                        <mat-error *ngIf="form.get('alternativeMail')?.errors?.serverError">{{errorMessage}}</mat-error>
                     </mat-form-field>

                     <div class="col-md-6 col-sm-12 form-input">
                        <button mat-raised-button type="submit" form="form" class="btn btn-primary form-control"
                                [disabled]="form.invalid">Update
                        </button>
                     </div>
                     <div class="col-md-6 col-sm-12 form-input">
                        <button mat-raised-button type="button" (click)="cancel()" class="btn btn-primary form-control">
                           Cancel
                        </button>
                     </div>

                     <div class="col-md-4 col-sm-12 form-input">
                        <button (click)=" this.enableChangePass = true" class="btn btn-primary form-control"
                                mat-raised-button
                                type="button">Change Password
                        </button>
                     </div>
                  </div>
               </form>

               <!--  Change Personal Image       -->
               <div class="change-img col-sm-12 col-lg-4">
                  <ul class="">
                     <li>
                        <h5>Personal Picture</h5>
                     </li>
                     <li class="imgBox">
                        <img [src]="profilePictureLink" alt="">
                     </li>
                     <li class="choose-img">
                        <div class="add-file">
                           <input #photoInput (change)="uploadPhoto($event)" accept="image/*" id="imageFile"
                                  type="file">
                           <label *ngIf="!this.form.get('universityMail')?.invalid" for="imageFile">Choose an
                              Image</label>
                        </div>
                     </li>
                  </ul>
               </div>
            </div>

            <div *ngIf="enableChangePass">
               <div class="subTitle">
                  <h4>Change Password</h4>
               </div>
               <hr>
               <!--  Submition Form   -->
               <div class="row">
                  <form (ngSubmit)="updatePass()" [formGroup]="passForm" class="submition-form col-sm-12 col-lg-8"
                        id="passForm">
                     <div class="form-row">
                        <mat-form-field appearance="outline" class="col-md-6 col-sm-12 form-input">
                           <mat-label>Old Password</mat-label>
                           <input formControlName="oldPass" matInput name="oldPass" required type="password">
                           <mat-error *ngIf="passForm.get('oldPass')?.errors">Minimum 8 Characters</mat-error>

                        </mat-form-field>
                        <mat-form-field appearance="outline" class="col-md-6 col-sm-12 form-input">
                           <mat-label>New Password</mat-label>
                           <input (change)="isPassChanged=true" formControlName="newPass" matInput name="newPass"
                                  required type="password">
                           <mat-error *ngIf="passForm.get('newPass')?.errors">Minimum 8 Characters</mat-error>

                        </mat-form-field>


                        <div class="col-md-6 col-sm-12 form-input">
                           <button [disabled]="passForm.invalid " [ngClass]="{'disabled-btn':passForm.invalid}"
                                   class="btn btn-primary form-control" form="passForm"
                                   mat-raised-button type="submit">Update
                           </button>
                        </div>
                        <div class="col-md-6 col-sm-12 form-input">
                           <button (click)=" this.enableChangePass = false" class="btn btn-primary form-control"
                                   mat-raised-button
                                   type="button">Cancel
                           </button>
                        </div>
                     </div>
                  </form>

               </div>
            </div>

         </div>
      </div>
   </div>
</div>
